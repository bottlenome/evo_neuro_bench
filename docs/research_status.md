# 研究状況メモ (2025-10-17)

## コードベースの整理状況
- Google Colab の単一ノートブックからの移管が完了し、`src/evo_neuro_bench/` 以下にモデル・アダプタ・タスクがモジュールとして整理されている。特に `benchmark.py` から各タスクごとに `ModelAdapter` を介して学習を呼び出す構成になっている。 

## ModelAdapter に関するメモ
- 現行の `ModelAdapter` はベースモデルの出力 (`{"motor": ...}`) を受け取り、遅延初期化した線形ヘッドで `n_actions` 次元のロジットを生成するだけの実装になっている。ベースモデルがすでにロジットを返す場合でも、現状は `motor` ベクトルにヘッドを通す流れが固定されている。 
- 以前に検討していた「ベースモデルがロジットを返している場合はそれを利用し、未定義の場合だけヘッドを噛ませる」案は、タスク横断での挙動切り替えができないことが課題。ベースモデルにロジットを返させると、反射・運動系タスクも同じロジットを共有してしまい抽象課題向けの拡張が副作用なく導入できない。

## 次のアクション案
- 抽象課題専用にロジットを扱いたい場合は、`ModelAdapter` あるいはタスク呼び出し側で「ベースが提供するロジットを使うタスク」と「`motor` からヘッドでロジットを生成するタスク」を明示的に分けるフラグを設ける必要がある。
- ベースモデルからロジットを返す場合も、`out["motor"]` を既存タスク向けに維持しつつ、抽象課題専用のキー（例: `abstract_logits`）を追加する設計を検討する。
